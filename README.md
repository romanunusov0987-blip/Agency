# Agency

Telegram-бот и сопутствующие ресурсы проекта.

## Структура проекта

- `bot.py` — основной код Telegram-бота с командами `/support` и `/cab`,
  обработчиками inline-кнопок и логикой «Личного кабинета», включая изменение
  имени и возраста, генерацию реферальной ссылки и настройки меню команд.
- `requirements.txt` — зависимости Python-проекта (используется `python-telegram-bot`).
- `index.html` — статическая страница сайта.
- `img/` — директория с изображениями для сайта.
- `CNAME` — настройка пользовательского домена для GitHub Pages.

## Команды бота

В меню Telegram и через слэш-доступ доступны следующие команды:

- `/support` — отправляет пользователю подсказку для обращения в поддержку и
  кнопку перехода в чат.
- `/cab` — открывает «Личный кабинет» с информацией профиля, возможностью
  редактировать имя и возраст, а также кнопками для связи с поддержкой и
  записи на консультацию.

## Функциональность личного кабинета

- Профиль хранится в `context.user_data` и включает имя, возраст, пол, баланс
  бесплатных и платных токенов, статус подписки и реферальный код.
- Реферальная ссылка формируется автоматически на основе идентификатора
  пользователя и имени бота.
- Inline-кнопки позволяют обновить имя и возраст, записаться на консультацию,
  открыть чат поддержки или закрыть панель.

## Запуск бота локально

1. Установите зависимости: `pip install -r requirements.txt`.
2. Установите переменную окружения `TELEGRAM_BOT_TOKEN` с токеном вашего бота.
3. При необходимости задайте `SUPPORT_CHAT_URL` и `CONSULTATION_URL` для кнопок.
4. Запустите приложение: `python -m bot` или выполните функцию `main()`.

При запуске бот автоматически регистрирует команды `/support` и `/cab` и
устанавливает меню типа «Commands». Благодаря этому Telegram гарантированно
показывает пункт «Личный кабинет» в меню, а команда `/cab` срабатывает без
дополнительной ручной настройки.
